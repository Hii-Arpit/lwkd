---
layout: post
title: Week Ending March 3, 2024
date: 2024-03-05 22:00:00 -0000
slug: 2024-03-03-update
---

## Developer News


## Release Schedule

**Next Deadline: Test Freeze, March 27th**

Code Freeze is [now in effect](https://groups.google.com/a/kubernetes.io/g/dev/c/Y1EJ1HGBPJk/m/mSMClkn4AwAJ?utm_medium=email&utm_source=footer). If your KEP did not get tracked and you want to get your KEP shipped in the 1.30 release, please [file an exception](https://github.com/kubernetes/sig-release/blob/master/releases/EXCEPTIONS.md) as soon as possible.


## Featured PRs

### [#122717: KEP-4358: Custom Resource Field Selectors](https://github.com/kubernetes/kubernetes/pull/122717)

Selectors in Kubernetes have long been a way to limit large API calls like List and Watch, requesting things with only specific labels or similar. In operators this can be very important to reduce memory usage of shared informer caches, as well as generally keeping apiserver load down. Some core objects extended selectors beyond labels, allowing filtering on other fields such as listing Pods based on `spec.nodeName`. But this set of fields was limited and could feel random if you didn't know the specific history of the API (e.g. Pods need a node name filter because it's the main request made by the kubelet). And it wasn't available at all to custom type. This PR expands the system, allowing each custom type to declare selector-able fields which will be checked and indexed automatically. The declaration uses JSONPath in a very similar way to the `additionalPrinterColumns` feature:

```yaml
selectableFields:
- jsonPath: .spec.color
- jsonPath: .spec.size
```

These can then be used in the API just like any other field selector:

```go
c.List(context.Background(), &redThings, client.MatchingFields{
	"spec.color": "red",
})
```

As an alpha feature, this is behind the `CustomResourceFieldSelectors` feature gate.

## KEP of the Week

### [KEP-1610: Container Resource based Autoscaling](https://github.com/kubernetes/enhancements/blob/master/keps/sig-autoscaling/1610-container-resource-autoscaling/README.md)

For scaling pods based on resource usage, the HPA currently calculates the sum of all the individual container's resource usage. This is not suitable for workloads where the containers are not related to each other. This KEP proposes that the HPA also provide an option to scale pods based on the resource usages of individual containers in a Pod. The KEP proposes adding a new `ContainerResourceMetricSource` metric source, with a new `Container` field, which will be used to identify the container for which the resources should be tracked. When there are multiple containers in a Pod, the individual resource usages of each container can change at different rates. Adding a way to specify the target gives more fine grained control over the scaling.

This KEP is in beta since v1.27 and is planned to graduate to stable in v1.30.

## Other Merges

* Enhanced [conflict Detection](https://github.com/kubernetes/kubernetes/pull/123561]) for Service Account and JWT.
* Accepts [zero as a default value for kubectl](https://github.com/kubernetes/kubernetes/pull/123565) create token duration.
* Enhanced Security: [Reject Empty Username](https://github.com/kubernetes/kubernetes/pull/123568) in OIDC Authentication.
* OpenAPI V2 won't publish [non-matching group-version](https://github.com/kubernetes/kubernetes/pull/123570) aggregated apiserver docs.
* [Pod Scheduling Gates Graduate to General Availability in Kubernetes](https://github.com/kubernetes/kubernetes/pull/123575)
* Enhanced [Authorization Monitoring](https://github.com/kubernetes/kubernetes/pull/123611) with New Webhook Match Condition Metrics.
* [Kubeadm now lists nodes needing upgrades](https://github.com/kubernetes/kubernetes/pull/123578)
* Kubeadm [improves default flag redundancy](https://github.com/kubernetes/kubernetes/pull/123555) for ClusterConfiguration.
* Kubernetes [Strengthens Security with Strict JWT Compact Serialization Enforcement](https://github.com/kubernetes/kubernetes/pull/123540)
* Kubernetes [improves development process](https://github.com/kubernetes/kubernetes/pull/123529) with Go workspaces.
* [Critical Aggregated API Service Leak Patched in Kubernetes](https://github.com/kubernetes/kubernetes/pull/123517)
* [Enhances Garbage Collection with image_id Update](https://github.com/kubernetes/kubernetes/pull/123508)
* [Improves Output for kubeadm upgrade plan command](https://github.com/kubernetes/kubernetes/pull/123492)
* Client-Go Adds Support for [Upgrading Subresource Fields](https://github.com/kubernetes/kubernetes/pull/123484)
* Kubernetes API [Docs Now Include Minimum JWT Payload](https://github.com/kubernetes/kubernetes/pull/123458)
* [ImageMaximumGCAge Feature promoted to Beta](https://github.com/kubernetes/kubernetes/pull/123424)
* Enhances [Authorization Monitoring](https://github.com/kubernetes/kubernetes/pull/123611) with New Webhook Match Condition Metrics.
* Kubeadm Introduces [WaitForAllControlPlaneComponents Feature Gate](https://github.com/kubernetes/kubernetes/pull/123341) for Enhanced Functionality.
* Node Controller [Enhances Cloud Provider Integration](https://github.com/kubernetes/kubernetes/pull/123331) for Improved Node Object Initialization.
* Introduced ['SELinuxMount' Feature Gate](https://github.com/kubernetes/kubernetes/pull/123157) for Expanded Volume Mounting Capabilities.
* Fixed [Critical Node Lifecycle Controller Panic Issue](https://github.com/kubernetes/kubernetes/pull/122874)
* [Enhanced Logging Control for Reduced Information Noise](https://github.com/kubernetes/kubernetes/pull/122293)
* [Boosts Performance and Clarity with Enhanced Text Logging Using Textlogger](https://github.com/kubernetes/kubernetes/pull/114672)














## Promotions

*

## Deprecated

*

## Version Updates

*

## Subprojects and Dependency Updates

* [kubespray to v2.24.1](https://github.com/kubernetes-sigs/kubespray/releases/tag/v2.24.1) Set Kubernetes v1.28.6 as the default Kubernetes version.
* [prometheus to v2.50.1](https://github.com/prometheus/prometheus/releases/tag/v2.50.1) Fix for broken /metadata API endpoint
