---
layout: post
title: Week Ending September 5, 2021
date: 2021-09-08 04:00:00 -0000
slug: 2021-09-05-update
---

## Developer News

SIG-Usability is gathering data about what tools people use to interact with and debug Kubernetes. Please [fill out their survey if you can](https://docs.google.com/forms/d/e/1FAIpQLSceQebpVzc1bJNQ8-a1mOp3VrkOFd3cN6UmZ0QsDCUUnX23AQ/viewform).

## Release Schedule

**Next Deadline: Enhancements Freeze, Sept. 9th**

Enhancements Freeze is just around the corner! Make sure you've got everything sorted out on the [Enhancements Sheet](https://bit.ly/k8s123-enhancements).

## Featured PRs

### [#103631: Automate code generated by using mockgen and go:generate](https://github.com/kubernetes/kubernetes/pull/103631)

Our mockgen usage has been moved from "remember to run this" comments into `go:generate`. Together with a new `hack/update-mocks.sh` script to run `go generate` for any changed files, this streamlines and automates the management of these mock interfaces. If you're editing anything with a mockgen generate comment, make sure you run the update script before committing.

### [#104590: Add GA AnnStorageProvisioner annotation to PVC](https://github.com/kubernetes/kubernetes/pull/104590)

The `volume.beta.kubernetes.io/storage-provisioner` annotation used for communication between Kubernetes and CSI now has a GA version: `volume.kubernetes.io/storage-provisioner`. The old annotation is still present but deprecated. Any tooling relying on it should update to check for the new key first.

## Merges

* Controller-manager has a [more flexible health check system](https://github.com/kubernetes/kubernetes/pull/104667)
* PodSecurity will run [before PodSecurityPolicy](https://github.com/kubernetes/kubernetes/pull/104715) so that audit and warn rules in PodSecurity can still trigger
* Reduce [parallel type checks to 2 threads](https://github.com/kubernetes/kubernetes/pull/104608) to reduce RAM usage
* Kubelet resource calculations [will not include completed pods](https://github.com/kubernetes/kubernetes/pull/104577)

## Deprecations

* `volume.beta.kubernetes.io/storage-provisioner` annotation is deprecated, see above

## Removals

* `--seccomp-profile-root` Kubelet config [removed in favor of using the `<root-dir>/seccomp` directory](https://github.com/kubernetes/kubernetes/pull/103941)

## Version Updates

* Test images now include [Windows ltsc2022](https://github.com/kubernetes/kubernetes/pull/104458)
